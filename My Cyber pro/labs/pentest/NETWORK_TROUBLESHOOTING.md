# Pentest Lab Network Troubleshooting

## ‚ö†Ô∏è Issue: Ping Not Working

If you're seeing ping fail, it's likely because you're using the wrong IP addresses.

## ‚úÖ Correct Network Configuration

According to the `docker-compose.yml`, the network is:
- **Network:** `172.25.0.0/16`
- **Attacker IP:** `172.25.0.10`
- **DVWA IP:** `172.25.0.50`
- **Juice Shop IP:** `172.25.0.60`

## üîç Diagnostic Commands

Run these commands **in the attacker terminal** to diagnose:

### 1. Check Your Own IP
```bash
ip a
# Look for the IP address on eth0 - should be 172.25.0.10
```

### 2. Check If Containers Are Running
From your **Windows PowerShell**:
```powershell
docker ps --filter "name=pentest"
```

You should see 3 containers:
- `pentest_attacker`
- `pentest_dvwa`
- `pentest_juice`

### 3. Get Actual IP Addresses
From **Windows PowerShell**:
```powershell
# Check DVWA IP
docker inspect pentest_dvwa --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'

# Check Juice Shop IP
docker inspect pentest_juice --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'

# Check Attacker IP
docker inspect pentest_attacker --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'
```

## ‚úÖ Correct Ping Commands

From the **attacker terminal**, use these IPs:

```bash
# Ping DVWA (correct IP)
ping 172.25.0.50

# Ping Juice Shop (correct IP)
ping 172.25.0.60

# If the above don't work, try pinging by container name
ping dvwa
ping juiceshop
```

## üîß If Ping Still Doesn't Work

### Option 1: Restart All Containers
```powershell
cd "C:\Users\navin\OneDrive\Î¨∏ÏÑú\MY cyber\CyberPro\My Cyber pro\labs\pentest"
docker-compose down
docker-compose up -d
```

Wait 30 seconds for containers to fully start, then try again.

### Option 2: Check Network Connectivity
From **attacker terminal**:
```bash
# Check if you can reach the gateway
ip route
ping 172.25.0.1

# Check DNS resolution
nslookup dvwa
nslookup juiceshop
```

### Option 3: Use Container Names Instead
Docker's internal DNS should allow you to use container hostnames:
```bash
# Try using hostnames instead of IPs
ping dvwa
ping juiceshop

# Or use the service names from docker-compose
ping target_dvwa
ping target_juice
```

## üéØ Quick Test Workflow

1. **Check your IP:**
   ```bash
   ip a | grep "inet "
   ```
   Should show `172.25.0.10`

2. **Ping targets:**
   ```bash
   ping -c 3 172.25.0.50
   ping -c 3 172.25.0.60
   ```

3. **If ping works, try HTTP:**
   ```bash
   curl http://172.25.0.50
   curl http://172.25.0.60:3000
   ```

4. **Run discovery script:**
   ```bash
   discover.sh
   ```
   This shows all the correct IPs and commands.

## üìù Common Mistakes

‚ùå **Wrong:** `ping 172.20.0.50` (old network)  
‚úÖ **Correct:** `ping 172.25.0.50` (current network)

‚ùå **Wrong:** `ping 172.25.0.60:3000` (can't use port with ping)  
‚úÖ **Correct:** `ping 172.25.0.60` (ping doesn't use ports)

## üÜò Still Not Working?

If none of the above works, the containers might not be on the same network. Rebuild everything:

```powershell
cd "C:\Users\navin\OneDrive\Î¨∏ÏÑú\MY cyber\CyberPro\My Cyber pro\labs\pentest"
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

Then wait 60 seconds and try again.
